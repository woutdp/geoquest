<script lang="ts">
    import {getCountryColor} from '$lib/utils'
    import {countryColors} from '$lib/store'

    export let data
    export let foundFeatures
    export let unfoundFeatures
    export let path
    export let clickCountryHandler
    export let countryFocusedHandler

    let feature = data[0]
    let topojson = data[1]
    $: color = getCountryColor(topojson, $countryColors)

    $: found = foundFeatures.includes(topojson)
    $: disabled = !unfoundFeatures.includes(topojson)
</script>

{#key found}
    <!-- svelte-ignore a11y-mouse-events-have-key-events -->
    <path
        on:mouseover={() => countryFocusedHandler(topojson)}
        on:mouseleave={() => countryFocusedHandler()}
        on:click={() => clickCountryHandler(topojson)}
        class={found || disabled ? 'fill-gray' : `${color} hover:fill-foreground cursor-pointer`}
        d={path(feature)}
    />
{/key}
